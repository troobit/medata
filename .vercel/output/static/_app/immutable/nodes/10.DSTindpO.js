import{f as M,a as v,c as Ut,t as lt}from"../chunks/kKy66PDH.js";import{p as ee,c as o,s as a,k as n,g as t,h as k,t as w,a as ae,f as St,u as At,r,l as re}from"../chunks/DTv0fGkk.js";import{s as j}from"../chunks/9Aoxbd_n.js";import{i as P}from"../chunks/CLGhL_wd.js";import{e as Bt}from"../chunks/e5qBh1E7.js";import{r as z,a as L}from"../chunks/BjHF3nwv.js";import{s as ot}from"../chunks/D-fc9hNp.js";import{d as le}from"../chunks/CEtxWd_S.js";import{b as A}from"../chunks/Do8t-uj2.js";import{b as oe}from"../chunks/DRmDg3C7.js";import{g as ie}from"../chunks/Bm5o5tlR.js";import{B as ne}from"../chunks/NoJzPs2l.js";import{e as it}from"../chunks/Dvvmo4p2.js";var se=M('<div class="relative"><img alt="Captured meal" class="h-40 w-full rounded-lg object-cover"/> <button type="button" class="absolute right-2 top-2 flex h-8 w-8 items-center justify-center rounded-full bg-gray-900/80 text-white hover:bg-gray-900" aria-label="Remove photo">‚úï</button></div>'),ce=M('<label class="flex h-24 cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-700 bg-gray-800/50 text-gray-400 transition-colors hover:border-gray-600 hover:bg-gray-800"><svg class="mb-1 h-8 w-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> <span class="text-sm">Add photo</span> <input type="file" accept="image/*" capture="environment" class="hidden"/></label>'),de=M('<button type="button"><span class="text-2xl"> </span> <span class="mt-1 text-[10px] text-gray-400"> </span></button>'),be=M('<button type="button"><span class="text-2xl"> </span> <span class="mt-1 text-[10px] text-gray-400"> </span></button>'),ue=M('<div><label for="alcohol-type" class="mb-1 block text-xs font-medium text-gray-400">Drink type</label> <select id="alcohol-type" class="w-full rounded-lg border border-gray-700 bg-gray-900 px-3 py-2 text-white focus:border-brand-accent focus:outline-none focus:ring-1 focus:ring-brand-accent"><option>Not specified</option><option>Beer / Cider</option><option>Wine</option><option>Spirits / Shots</option><option>Cocktails / Mixed</option></select></div>'),ge=M('<div class="mt-3 space-y-4 rounded-lg bg-gray-800/50 p-4"><div><label for="protein-input" class="mb-2 block text-xs font-medium text-gray-400">Protein (g)</label> <div class="flex items-center justify-center gap-2"><button type="button" class="flex h-10 w-10 items-center justify-center rounded-full bg-gray-700 text-lg text-gray-300 transition-colors hover:bg-gray-600 active:bg-gray-500 disabled:opacity-50" aria-label="Decrease protein by 5g">-5</button> <button type="button" class="flex h-10 w-10 items-center justify-center rounded-full bg-gray-700 text-xl text-gray-300 transition-colors hover:bg-gray-600 active:bg-gray-500 disabled:opacity-50" aria-label="Decrease protein by 1g">-</button> <div class="w-16 text-center"><input id="protein-input" type="number" min="0" max="200" class="w-full bg-transparent text-center text-2xl font-bold text-white focus:outline-none"/></div> <button type="button" class="flex h-10 w-10 items-center justify-center rounded-full bg-gray-700 text-xl text-gray-300 transition-colors hover:bg-gray-600 active:bg-gray-500 disabled:opacity-50" aria-label="Increase protein by 1g">+</button> <button type="button" class="flex h-10 w-10 items-center justify-center rounded-full bg-gray-700 text-lg text-gray-300 transition-colors hover:bg-gray-600 active:bg-gray-500 disabled:opacity-50" aria-label="Increase protein by 5g">+5</button></div></div> <div><label for="fat-input" class="mb-2 block text-xs font-medium text-gray-400">Fat (g)</label> <div class="flex items-center justify-center gap-2"><button type="button" class="flex h-10 w-10 items-center justify-center rounded-full bg-gray-700 text-lg text-gray-300 transition-colors hover:bg-gray-600 active:bg-gray-500 disabled:opacity-50" aria-label="Decrease fat by 5g">-5</button> <button type="button" class="flex h-10 w-10 items-center justify-center rounded-full bg-gray-700 text-xl text-gray-300 transition-colors hover:bg-gray-600 active:bg-gray-500 disabled:opacity-50" aria-label="Decrease fat by 1g">-</button> <div class="w-16 text-center"><input id="fat-input" type="number" min="0" max="200" class="w-full bg-transparent text-center text-2xl font-bold text-white focus:outline-none"/></div> <button type="button" class="flex h-10 w-10 items-center justify-center rounded-full bg-gray-700 text-xl text-gray-300 transition-colors hover:bg-gray-600 active:bg-gray-500 disabled:opacity-50" aria-label="Increase fat by 1g">+</button> <button type="button" class="flex h-10 w-10 items-center justify-center rounded-full bg-gray-700 text-lg text-gray-300 transition-colors hover:bg-gray-600 active:bg-gray-500 disabled:opacity-50" aria-label="Increase fat by 5g">+5</button></div></div> <!> <div><label for="description" class="mb-1 block text-xs font-medium text-gray-400">Description</label> <textarea id="description" rows="2" placeholder="What did you eat or drink?" class="w-full resize-none rounded-lg border border-gray-700 bg-gray-900 px-3 py-2 text-white placeholder-gray-500 focus:border-brand-accent focus:outline-none focus:ring-1 focus:ring-brand-accent"></textarea></div></div>'),ve=M('<div class="mb-4 rounded-lg bg-red-500/20 px-4 py-3 text-red-400"> </div>'),pe=M('<div class="flex min-h-[calc(100dvh-80px)] flex-col px-4 py-6"><header class="mb-6"><a href="/log" class="mb-4 inline-flex items-center text-gray-400 hover:text-gray-200"><svg class="mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg> Back</a> <h1 class="text-2xl font-bold text-white">Log Meal</h1></header> <div class="flex flex-1 flex-col"><div class="mb-6"><span class="mb-2 block text-sm font-medium text-gray-400">Smart Entry</span> <div class="grid grid-cols-3 gap-2"><a href="/log/meal/photo" class="flex flex-col items-center rounded-lg bg-blue-500/10 p-3 text-center transition-colors hover:bg-blue-500/20"><span class="mb-1 text-2xl">üì∑</span> <span class="text-xs text-blue-400">AI Photo</span></a> <a href="/log/meal/estimate" class="flex flex-col items-center rounded-lg bg-purple-500/10 p-3 text-center transition-colors hover:bg-purple-500/20"><span class="mb-1 text-2xl">üìê</span> <span class="text-xs text-purple-400">Estimate</span></a> <a href="/log/meal/label" class="flex flex-col items-center rounded-lg bg-green-500/10 p-3 text-center transition-colors hover:bg-green-500/20"><span class="mb-1 text-2xl">üè∑Ô∏è</span> <span class="text-xs text-green-400">Scan Label</span></a></div></div> <div class="mb-6 flex items-center gap-3"><div class="h-px flex-1 bg-gray-800"></div> <span class="text-xs text-gray-500">or enter manually</span> <div class="h-px flex-1 bg-gray-800"></div></div> <div class="mb-6"><!></div> <div class="mb-6"><span id="food-shortcuts-label" class="mb-2 block text-sm font-medium text-gray-400">Food</span> <div class="mb-4 grid grid-cols-6 gap-2" role="group" aria-labelledby="food-shortcuts-label"></div> <span id="drink-shortcuts-label" class="mb-2 block text-sm font-medium text-gray-400">Drinks</span> <div class="grid grid-cols-4 gap-2" role="group" aria-labelledby="drink-shortcuts-label"></div></div> <div class="mb-6 grid grid-cols-2 gap-4"><div class="rounded-lg bg-gray-800/50 p-4"><label for="carbs-input" class="mb-2 block text-center text-sm font-medium text-green-400">Carbs (g)</label> <div class="flex items-center justify-center gap-2"><button type="button" class="flex h-10 w-10 items-center justify-center rounded-full bg-gray-700 text-xl text-gray-300 transition-colors hover:bg-gray-600 active:bg-gray-500 disabled:opacity-50" aria-label="Decrease by 5g">-5</button> <div class="w-16 text-center"><input id="carbs-input" type="number" min="0" max="500" class="w-full bg-transparent text-center text-3xl font-bold text-white focus:outline-none"/></div> <button type="button" class="flex h-10 w-10 items-center justify-center rounded-full bg-gray-700 text-xl text-gray-300 transition-colors hover:bg-gray-600 active:bg-gray-500 disabled:opacity-50" aria-label="Increase by 5g">+5</button></div></div> <div class="rounded-lg bg-gray-800/50 p-4"><label for="alcohol-input" class="mb-2 block text-center text-sm font-medium text-purple-400">Drinks</label> <div class="flex items-center justify-center gap-2"><button type="button" class="flex h-10 w-10 items-center justify-center rounded-full bg-gray-700 text-xl text-gray-300 transition-colors hover:bg-gray-600 active:bg-gray-500 disabled:opacity-50" aria-label="Decrease by 1">-</button> <div class="w-16 text-center"><input id="alcohol-input" type="number" min="0" max="20" step="0.5" class="w-full bg-transparent text-center text-3xl font-bold text-white focus:outline-none"/></div> <button type="button" class="flex h-10 w-10 items-center justify-center rounded-full bg-gray-700 text-xl text-gray-300 transition-colors hover:bg-gray-600 active:bg-gray-500 disabled:opacity-50" aria-label="Increase by 1">+</button></div></div></div> <div class="mb-6"><button type="button" class="flex w-full items-center justify-between rounded-lg bg-gray-800 px-4 py-3 text-left text-gray-400 transition-colors hover:bg-gray-700"><span class="text-sm font-medium">More details</span> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div> <!> <div class="mt-auto"><!></div></div></div>');function Ce(Tt,It){ee(It,!0);const zt=[{icon:"üçî",label:"Burger",carbs:45,protein:25,fat:30},{icon:"üçï",label:"Pizza",carbs:35,protein:12,fat:12},{icon:"üçû",label:"Toast",carbs:15,protein:3,fat:1},{icon:"üçé",label:"Apple",carbs:25,protein:0,fat:0},{icon:"ü•ó",label:"Salad",carbs:10,protein:5,fat:8},{icon:"üçö",label:"Rice",carbs:45,protein:4,fat:0}],Lt=[{icon:"üç∫",label:"Pint",carbs:15,alcoholUnits:2,alcoholType:"beer"},{icon:"üç∑",label:"Wine",carbs:4,alcoholUnits:2,alcoholType:"wine"},{icon:"ü•É",label:"Spirit",carbs:0,alcoholUnits:1,alcoholType:"spirit"},{icon:"üçπ",label:"Cocktail",carbs:20,alcoholUnits:2,alcoholType:"mixed"}];let d=k(0),b=k(0),u=k(0),s=k(0),D=k(""),$=k(""),F=k(!1),C=k(!1),B=k(null);function Ft(e=1){n(d,Math.min(500,Math.max(0,t(d)+e)),!0)}function Rt(e=1){n(d,Math.max(0,t(d)-e),!0)}function nt(e=1){n(b,Math.min(200,Math.max(0,t(b)+e)),!0)}function st(e=1){n(b,Math.max(0,t(b)-e),!0)}function ct(e=1){n(u,Math.min(200,Math.max(0,t(u)+e)),!0)}function dt(e=1){n(u,Math.max(0,t(u)-e),!0)}function Wt(e=1){n(s,Math.min(20,Math.max(0,t(s)+e)),!0)}function Et(e=1){n(s,Math.max(0,t(s)-e),!0)}function bt(e){n(d,e.carbs,!0),n(b,e.protein??0,!0),n(u,e.fat??0,!0),n(s,e.alcoholUnits??0,!0),n(D,e.alcoholType??"",!0),n($,e.label,!0)}function Ht(e){var c;const i=(c=e.target.files)==null?void 0:c[0];if(i){const p=new FileReader;p.onload=g=>{var x;n(B,(x=g.target)==null?void 0:x.result,!0)},p.readAsDataURL(i)}}function Nt(){n(B,null)}const ut=At(()=>t(d)>0||t(s)>0);async function Vt(){if(t(ut)){n(F,!0);try{await it.logMeal(t(d),{protein:t(b)>0?t(b):void 0,fat:t(u)>0?t(u):void 0,alcoholUnits:t(s)>0?t(s):void 0,alcoholType:t(s)>0&&t(D)?t(D):void 0,description:t($)||void 0}),ie("/")}catch{}finally{n(F,!1)}}}var R=pe(),gt=a(o(R),2),W=a(o(gt),4),qt=o(W);{var Gt=e=>{var l=se(),i=o(l),c=a(i,2);c.__click=Nt,r(l),w(()=>L(i,"src",t(B))),v(e,l)},Jt=e=>{var l=ce(),i=a(o(l),4);i.__change=Ht,r(l),v(e,l)};P(qt,e=>{t(B)?e(Gt):e(Jt,!1)})}r(W);var E=a(W,2),H=a(o(E),2);Bt(H,21,()=>zt,e=>e.label,(e,l)=>{var i=de();i.__click=()=>bt(t(l));var c=o(i),p=o(c,!0);r(c);var g=a(c,2),x=o(g);r(g),r(i),w(()=>{ot(i,1,`flex flex-col items-center rounded-lg p-2 text-center transition-colors ${t($)===t(l).label?"bg-green-500/20 ring-2 ring-green-500":"bg-gray-800 hover:bg-gray-700"}`),L(i,"title",`${t(l).label??""}: ${t(l).carbs??""}g carbs`),j(p,t(l).icon),j(x,`${t(l).carbs??""}g`)}),v(e,i)}),r(H);var vt=a(H,4);Bt(vt,21,()=>Lt,e=>e.label,(e,l)=>{var i=be();i.__click=()=>bt(t(l));var c=o(i),p=o(c,!0);r(c);var g=a(c,2),x=o(g);r(g),r(i),w(()=>{ot(i,1,`flex flex-col items-center rounded-lg p-2 text-center transition-colors ${t($)===t(l).label?"bg-purple-500/20 ring-2 ring-purple-500":"bg-gray-800 hover:bg-gray-700"}`),L(i,"title",`${t(l).label??""}: ${t(l).carbs??""}g carbs, ${t(l).alcoholUnits??""}u alcohol`),j(p,t(l).icon),j(x,`${t(l).carbs??""}g / ${t(l).alcoholUnits??""}u`)}),v(e,i)}),r(vt),r(E);var N=a(E,2),V=o(N),pt=a(o(V),2),q=o(pt);q.__click=()=>Rt(5);var G=a(q,2),xt=o(G);z(xt),r(G);var ft=a(G,2);ft.__click=()=>Ft(5),r(pt),r(V);var yt=a(V,2),mt=a(o(yt),2),J=o(mt);J.__click=()=>Et(1);var K=a(J,2),ht=o(K);z(ht),r(K);var _t=a(K,2);_t.__click=()=>Wt(1),r(mt),r(yt),r(N);var O=a(N,2),U=o(O);U.__click=()=>n(C,!t(C));var Kt=a(o(U),2);r(U);var Ot=a(U,2);{var Qt=e=>{var l=ge(),i=o(l),c=a(o(i),2),p=o(c);p.__click=()=>st(5);var g=a(p,2);g.__click=()=>st(1);var x=a(g,2),y=o(x);z(y),r(x);var m=a(x,2);m.__click=()=>nt(1);var T=a(m,2);T.__click=()=>nt(5),r(c),r(i);var S=a(i,2),I=a(o(S),2),f=o(I);f.__click=()=>dt(5);var h=a(f,2);h.__click=()=>dt(1);var Q=a(h,2),jt=o(Q);z(jt),r(Q);var X=a(Q,2);X.__click=()=>ct(1);var Mt=a(X,2);Mt.__click=()=>ct(5),r(I),r(S);var $t=a(S,2);{var Zt=_=>{var Y=ue(),Z=a(o(Y),2),tt=o(Z);tt.value=tt.__value="";var et=a(tt);et.value=et.__value="beer";var at=a(et);at.value=at.__value="wine";var rt=a(at);rt.value=rt.__value="spirit";var Ct=a(rt);Ct.value=Ct.__value="mixed",r(Z),r(Y),oe(Z,()=>t(D),te=>n(D,te)),v(_,Y)};P($t,_=>{t(s)>0&&_(Zt)})}var Pt=a($t,2),Dt=a(o(Pt),2);re(Dt),r(Pt),r(l),w(()=>{p.disabled=t(b)<5,g.disabled=t(b)<=0,m.disabled=t(b)>=200,T.disabled=t(b)>195,f.disabled=t(u)<5,h.disabled=t(u)<=0,X.disabled=t(u)>=200,Mt.disabled=t(u)>195}),A(y,()=>t(b),_=>n(b,_)),A(jt,()=>t(u),_=>n(u,_)),A(Dt,()=>t($),_=>n($,_)),v(e,l)};P(Ot,e=>{t(C)&&e(Qt)})}r(O);var kt=a(O,2);{var Xt=e=>{var l=ve(),i=o(l,!0);r(l),w(()=>j(i,it.error)),v(e,l)};P(kt,e=>{it.error&&e(Xt)})}var wt=a(kt,2),Yt=o(wt);{let e=At(()=>!t(ut));ne(Yt,{variant:"primary",size:"lg",class:"w-full",onclick:Vt,get disabled(){return t(e)},get loading(){return t(F)},children:(l,i)=>{var c=Ut(),p=St(c);{var g=y=>{var m=lt();w(()=>j(m,`Log ${t(d)??""}g carbs + ${t(s)??""} drinks`)),v(y,m)},x=y=>{var m=Ut(),T=St(m);{var S=f=>{var h=lt();w(()=>j(h,`Log ${t(s)??""} drinks`)),v(f,h)},I=f=>{var h=lt();w(()=>j(h,`Log ${t(d)??""}g carbs`)),v(f,h)};P(T,f=>{t(s)>0?f(S):f(I,!1)},!0)}v(y,m)};P(p,y=>{t(s)>0&&t(d)>0?y(g):y(x,!1)})}v(l,c)},$$slots:{default:!0}})}r(wt),r(gt),r(R),w(()=>{q.disabled=t(d)<5,ft.disabled=t(d)>495,J.disabled=t(s)<=0,_t.disabled=t(s)>=20,L(U,"aria-expanded",t(C)),ot(Kt,0,`h-5 w-5 transition-transform ${t(C)?"rotate-180":""}`)}),A(xt,()=>t(d),e=>n(d,e)),A(ht,()=>t(s),e=>n(s,e)),v(Tt,R),ae()}le(["click","change"]);export{Ce as component};
