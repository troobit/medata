import{f as v,a as c,t as He,c as Ve}from"../chunks/kKy66PDH.js";import{p as Ye,h as i,i as u,c as r,s as t,k as l,t as f,g as a,a as qe,r as o,n as de,f as Je}from"../chunks/DTv0fGkk.js";import{s as x}from"../chunks/9Aoxbd_n.js";import{i as b}from"../chunks/CLGhL_wd.js";import{r as m}from"../chunks/BjHF3nwv.js";import{s as I}from"../chunks/D-fc9hNp.js";import{d as Ne}from"../chunks/CEtxWd_S.js";import{b as y}from"../chunks/Do8t-uj2.js";import{b as Qe}from"../chunks/DRmDg3C7.js";import{B as We}from"../chunks/NoJzPs2l.js";import{s as n}from"../chunks/Dvvmo4p2.js";var Xe=v('<p class="mt-1 text-xs text-gray-500"> </p>'),Ze=v('<p class="mt-1 text-xs text-gray-500"> </p>'),et=v('<p class="mt-1 text-xs text-gray-500"> </p>'),tt=v('<p class="mt-1 text-xs text-gray-500"> </p>'),at=v('<p class="mt-1 text-xs text-green-400">Connected successfully</p>'),rt=v('<p class="mt-1 text-xs text-red-400"> </p>'),ot=v('<div class="mb-4 rounded-lg bg-green-500/20 px-4 py-3 text-center text-green-400">Settings saved successfully</div>'),lt=v('<div class="px-4 py-6"><header class="mb-8"><h1 class="text-2xl font-bold text-white">Settings</h1></header> <div class="space-y-8"><section><h2 class="mb-4 text-lg font-semibold text-gray-200">ML Config</h2> <p class="mb-4 text-sm text-gray-400">Configure ML providers for food recognition. Keys are stored locally on your device.</p> <div class="mb-6"><label for="provider" class="mb-2 block text-sm font-medium text-gray-400">Preferred Provider</label> <select id="provider" class="w-full rounded-lg border border-gray-700 bg-gray-800 px-4 py-3 text-white focus:border-brand-accent focus:outline-none focus:ring-1 focus:ring-brand-accent"><option>Auto-detect</option><option>OpenAI</option><option>Google Gemini</option><option>Anthropic Claude</option><option>Microsoft Foundry</option><option>Ollama (Self-hosted)</option></select></div> <div class="mb-6 rounded-lg border border-gray-700 p-4"><h3 class="mb-3 text-sm font-medium text-gray-300">Cloud Providers</h3> <div class="mb-4"><label for="openai" class="mb-2 block text-sm font-medium text-gray-400">OpenAI API Key</label> <input id="openai" type="password" placeholder="sk-..." class="w-full rounded-lg border border-gray-700 bg-gray-800 px-4 py-3 text-white placeholder-gray-500 focus:border-brand-accent focus:outline-none focus:ring-1 focus:ring-brand-accent"/> <!></div> <div class="mb-4"><label for="gemini" class="mb-2 block text-sm font-medium text-gray-400">Google Gemini API Key</label> <input id="gemini" type="password" placeholder="AIza..." class="w-full rounded-lg border border-gray-700 bg-gray-800 px-4 py-3 text-white placeholder-gray-500 focus:border-brand-accent focus:outline-none focus:ring-1 focus:ring-brand-accent"/> <!></div> <div class="mb-4"><label for="claude" class="mb-2 block text-sm font-medium text-gray-400">Anthropic Claude API Key</label> <input id="claude" type="password" placeholder="sk-ant-..." class="w-full rounded-lg border border-gray-700 bg-gray-800 px-4 py-3 text-white placeholder-gray-500 focus:border-brand-accent focus:outline-none focus:ring-1 focus:ring-brand-accent"/> <!></div></div> <div class="mb-6 rounded-lg border border-gray-700 p-4"><h3 class="mb-3 text-sm font-medium text-gray-300">Microsoft Foundry</h3> <p class="mb-3 text-xs text-gray-500">Azure AI Foundry endpoint and API key for vision models.</p> <div class="mb-4"><label for="foundry-endpoint" class="mb-2 block text-sm font-medium text-gray-400">Endpoint URL</label> <input id="foundry-endpoint" type="url" placeholder="https://&lt;service>.services.ai.azure.com/api/projects/&lt;project>" class="w-full rounded-lg border border-gray-700 bg-gray-800 px-4 py-3 text-sm text-white placeholder-gray-500 focus:border-brand-accent focus:outline-none focus:ring-1 focus:ring-brand-accent"/></div> <div><label for="foundry-key" class="mb-2 block text-sm font-medium text-gray-400">API Key</label> <input id="foundry-key" type="password" placeholder="Your Foundry API key" class="w-full rounded-lg border border-gray-700 bg-gray-800 px-4 py-3 text-white placeholder-gray-500 focus:border-brand-accent focus:outline-none focus:ring-1 focus:ring-brand-accent"/> <!></div></div> <div class="mb-6 rounded-lg border border-gray-700 p-4"><h3 class="mb-3 text-sm font-medium text-gray-300">Ollama (Self-hosted)</h3> <p class="mb-3 text-xs text-gray-500">Connect to a local or self-hosted Ollama instance for privacy-focused inference.</p> <div class="mb-4"><label for="ollama-endpoint" class="mb-2 block text-sm font-medium text-gray-400">Endpoint URL</label> <div class="flex gap-2"><input id="ollama-endpoint" type="url" placeholder="http://localhost:11434" class="flex-1 rounded-lg border border-gray-700 bg-gray-800 px-4 py-3 text-white placeholder-gray-500 focus:border-brand-accent focus:outline-none focus:ring-1 focus:ring-brand-accent"/> <button type="button" class="rounded-lg bg-gray-700 px-4 py-3 text-sm text-gray-300 transition-colors hover:bg-gray-600 disabled:opacity-50"> </button></div> <!></div> <div><label for="ollama-model" class="mb-2 block text-sm font-medium text-gray-400">Vision Model</label> <input id="ollama-model" type="text" placeholder="llava, bakllava, llava-llama3" class="w-full rounded-lg border border-gray-700 bg-gray-800 px-4 py-3 text-white placeholder-gray-500 focus:border-brand-accent focus:outline-none focus:ring-1 focus:ring-brand-accent"/> <p class="mt-1 text-xs text-gray-500">Use a vision-capable model like llava or bakllava for food recognition.</p></div></div></section> <section><h2 class="mb-4 text-lg font-semibold text-gray-200">Defaults</h2> <div class="mb-4"><span id="insulin-type-label" class="mb-2 block text-sm font-medium text-gray-400">Default Insulin Type</span> <div class="grid grid-cols-2 gap-2" role="group" aria-labelledby="insulin-type-label"><button type="button">Bolus</button> <button type="button">Basal</button></div></div> <div class="mb-4"><span id="bsl-unit-label" class="mb-2 block text-sm font-medium text-gray-400">Blood Sugar Unit</span> <div class="grid grid-cols-2 gap-2" role="group" aria-labelledby="bsl-unit-label"><button type="button">mmol/L</button> <button type="button">mg/dL</button></div></div></section> <div class="pt-4"><!> <!></div> <section class="border-t border-gray-800 pt-6"><h2 class="mb-4 text-lg font-semibold text-gray-200">About</h2> <div class="text-sm text-gray-400"><p>MeData v0.0.1</p> <p class="mt-1">Personal health data tracking application</p></div></section></div></div>');function yt(Ke,Pe){Ye(Pe,!0);let C=i(u(n.settings.openaiApiKey||"")),L=i(u(n.settings.geminiApiKey||"")),S=i(u(n.settings.claudeApiKey||"")),$=i(u(n.settings.foundryEndpoint||"")),E=i(u(n.settings.foundryApiKey||"")),A=i(u(n.settings.ollamaEndpoint||"http://localhost:11434")),M=i(u(n.settings.ollamaModel||"")),T=i(u(n.settings.aiProvider||"")),_=i(u(n.settings.defaultInsulinType)),h=i(u(n.settings.defaultBSLUnit)),B=i(!1),k=i(!1);async function Ie(){l(B,!0),l(k,!1);try{await n.update({openaiApiKey:a(C)||void 0,geminiApiKey:a(L)||void 0,claudeApiKey:a(S)||void 0,foundryEndpoint:a($)||void 0,foundryApiKey:a(E)||void 0,ollamaEndpoint:a(A)||void 0,ollamaModel:a(M)||void 0,aiProvider:a(T)||void 0,defaultInsulinType:a(_),defaultBSLUnit:a(h)}),l(k,!0),setTimeout(()=>l(k,!1),2e3)}finally{l(B,!1)}}function w(e){return!e||e.length<8?e:e.slice(0,4)+"..."+e.slice(-4)}let g=i("idle"),K=i("");async function Ce(){l(g,"testing"),l(K,"");try{const e=await fetch(`${a(A)}/api/tags`);e.ok?l(g,"success"):(l(g,"error"),l(K,`HTTP ${e.status}`))}catch(e){l(g,"error"),l(K,e instanceof Error?e.message:"Connection failed",!0)}}var U=lt(),ce=t(r(U),2),O=r(ce),F=t(r(O),4),z=t(r(F),2),G=r(z);G.value=G.__value="";var D=t(G);D.value=D.__value="openai";var j=t(D);j.value=j.__value="gemini";var R=t(j);R.value=R.__value="claude";var H=t(R);H.value=H.__value="foundry";var ue=t(H);ue.value=ue.__value="ollama",o(z),o(F);var V=t(F,2),Y=t(r(V),2),q=t(r(Y),2);m(q);var Le=t(q,2);{var Se=e=>{var s=Xe(),d=r(s);o(s),f(p=>x(d,`Current: ${p??""}`),[()=>w(n.settings.openaiApiKey)]),c(e,s)};b(Le,e=>{n.settings.openaiApiKey&&e(Se)})}o(Y);var J=t(Y,2),N=t(r(J),2);m(N);var $e=t(N,2);{var Ee=e=>{var s=Ze(),d=r(s);o(s),f(p=>x(d,`Current: ${p??""}`),[()=>w(n.settings.geminiApiKey)]),c(e,s)};b($e,e=>{n.settings.geminiApiKey&&e(Ee)})}o(J);var pe=t(J,2),Q=t(r(pe),2);m(Q);var Me=t(Q,2);{var Te=e=>{var s=et(),d=r(s);o(s),f(p=>x(d,`Current: ${p??""}`),[()=>w(n.settings.claudeApiKey)]),c(e,s)};b(Me,e=>{n.settings.claudeApiKey&&e(Te)})}o(pe),o(V);var W=t(V,2),X=t(r(W),4),ge=t(r(X),2);m(ge),o(X);var ve=t(X,2),Z=t(r(ve),2);m(Z);var Be=t(Z,2);{var Ue=e=>{var s=tt(),d=r(s);o(s),f(p=>x(d,`Current: ${p??""}`),[()=>w(n.settings.foundryApiKey)]),c(e,s)};b(Be,e=>{n.settings.foundryApiKey&&e(Ue)})}o(ve),o(W);var be=t(W,2),ee=t(r(be),4),te=t(r(ee),2),ae=r(te);m(ae);var P=t(ae,2);P.__click=Ce;var Oe=r(P,!0);o(P),o(te);var Fe=t(te,2);{var ze=e=>{var s=at();c(e,s)},Ge=e=>{var s=Ve(),d=Je(s);{var p=ne=>{var ie=rt(),Re=r(ie);o(ie),f(()=>x(Re,`Failed: ${a(K)??""}`)),c(ne,ie)};b(d,ne=>{a(g)==="error"&&ne(p)},!0)}c(e,s)};b(Fe,e=>{a(g)==="success"?e(ze):e(Ge,!1)})}o(ee);var me=t(ee,2),ye=t(r(me),2);m(ye),de(2),o(me),o(be),o(O);var re=t(O,2),oe=t(r(re),2),fe=t(r(oe),2),le=r(fe);le.__click=()=>l(_,"bolus");var xe=t(le,2);xe.__click=()=>l(_,"basal"),o(fe),o(oe);var _e=t(oe,2),he=t(r(_e),2),se=r(he);se.__click=()=>l(h,"mmol/L");var Ae=t(se,2);Ae.__click=()=>l(h,"mg/dL"),o(he),o(_e),o(re);var ke=t(re,2),we=r(ke);{var De=e=>{var s=ot();c(e,s)};b(we,e=>{a(k)&&e(De)})}var je=t(we,2);We(je,{variant:"primary",size:"lg",class:"w-full",onclick:Ie,get loading(){return a(B)},children:(e,s)=>{de();var d=He("Save Settings");c(e,d)},$$slots:{default:!0}}),o(ke),de(2),o(ce),o(U),f(()=>{P.disabled=a(g)==="testing",x(Oe,a(g)==="testing"?"Testing...":"Test"),I(le,1,`rounded-lg px-4 py-3 text-center font-medium transition-colors ${a(_)==="bolus"?"bg-blue-500 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`),I(xe,1,`rounded-lg px-4 py-3 text-center font-medium transition-colors ${a(_)==="basal"?"bg-blue-500 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`),I(se,1,`rounded-lg px-4 py-3 text-center font-medium transition-colors ${a(h)==="mmol/L"?"bg-yellow-500 text-gray-950":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`),I(Ae,1,`rounded-lg px-4 py-3 text-center font-medium transition-colors ${a(h)==="mg/dL"?"bg-yellow-500 text-gray-950":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`)}),Qe(z,()=>a(T),e=>l(T,e)),y(q,()=>a(C),e=>l(C,e)),y(N,()=>a(L),e=>l(L,e)),y(Q,()=>a(S),e=>l(S,e)),y(ge,()=>a($),e=>l($,e)),y(Z,()=>a(E),e=>l(E,e)),y(ae,()=>a(A),e=>l(A,e)),y(ye,()=>a(M),e=>l(M,e)),c(Ke,U),qe()}Ne(["click"]);export{yt as component};
