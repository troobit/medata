import{f as w,a as v,c as K,t as gt}from"../chunks/kKy66PDH.js";import{o as mt}from"../chunks/Dq_pO5zq.js";import{p as ut,a as xt,s as n,c as e,n as g,r as t,f as D,g as s,t as O,u as ft}from"../chunks/DTv0fGkk.js";import{s as f}from"../chunks/9Aoxbd_n.js";import{i as h}from"../chunks/CLGhL_wd.js";import{e as yt}from"../chunks/e5qBh1E7.js";import{s as bt}from"../chunks/D-fc9hNp.js";import{E as _t}from"../chunks/l9QAdfOH.js";import{B as ht}from"../chunks/NoJzPs2l.js";import{I as U,M as V,B as wt}from"../chunks/D3tohD0M.js";import{e as y}from"../chunks/Dvvmo4p2.js";var Tt=w('<div class="flex justify-center py-8"><div class="h-8 w-8 animate-spin rounded-full border-2 border-brand-accent border-t-transparent"></div></div>'),St=w('<li class="flex items-center justify-between rounded-lg bg-gray-800/50 px-4 py-3"><div class="flex items-center gap-3"><span><!></span> <div><p class="text-sm font-medium text-gray-200"> </p> <p class="text-xs text-gray-500"> </p></div></div></li>'),Lt=w('<div class="grid grid-cols-3 gap-3"><div class="rounded-lg bg-gray-800 p-4 text-center"><p class="text-2xl font-bold text-blue-400"> </p> <p class="mt-1 text-xs text-gray-400">units insulin</p></div> <div class="rounded-lg bg-gray-800 p-4 text-center"><p class="text-2xl font-bold text-green-400"> </p> <p class="mt-1 text-xs text-gray-400">g carbs</p></div> <div class="rounded-lg bg-gray-800 p-4 text-center"><p class="text-2xl font-bold text-yellow-400"> </p> <p class="mt-1 text-xs text-gray-400">avg BSL</p></div></div> <div class="mt-6"><h3 class="mb-3 text-sm font-medium text-gray-400">Recent entries</h3> <ul class="space-y-2"></ul></div>',1),Bt=w('<div class="px-4 py-6"><header class="mb-8 flex flex-col items-center text-center"><img src="/icon.svg" alt="MeData logo" class="mb-4 w-48"/> <p class="text-lg font-light text-gray-300"><span class="block">My body;</span> <span class="block">My Data.</span></p></header> <section class="mb-8"><h2 class="mb-4 text-lg font-semibold text-gray-200">Quick Log</h2> <div class="grid grid-cols-2 gap-3"><a href="/log/insulin" class="flex min-h-[80px] flex-col items-center justify-center rounded-xl bg-gray-800 p-4 transition-colors hover:bg-gray-700"><!> <span class="mt-2 text-sm font-medium text-gray-200">Insulin</span></a> <a href="/log/meal" class="flex min-h-[80px] flex-col items-center justify-center rounded-xl bg-gray-800 p-4 transition-colors hover:bg-gray-700"><!> <span class="mt-2 text-sm font-medium text-gray-200">Meal</span></a></div></section> <section><h2 class="mb-4 text-lg font-semibold text-gray-200">Today</h2> <!></section></div>');function Rt(W,X){ut(X,!0),mt(()=>{y.loadToday()});const b=ft(()=>{const r=y.events,d=r.filter(a=>a.eventType==="insulin"),B=r.filter(a=>a.eventType==="meal"),m=r.filter(a=>a.eventType==="bsl"),I=d.reduce((a,l)=>a+l.value,0),o=B.reduce((a,l)=>a+l.value,0),u=m.length>0?m.reduce((a,l)=>a+l.value,0)/m.length:null;return{totalInsulin:I,totalCarbs:o,avgBSL:u,eventCount:r.length}});var T=Bt(),S=n(e(T),2),F=n(e(S),2),L=e(F),Y=e(L);U(Y,{class:"h-8 w-8 text-blue-400"}),g(2),t(L);var N=n(L,2),Z=e(N);V(Z,{class:"h-8 w-8 text-green-400"}),g(2),t(N),t(F),t(S);var P=n(S,2),tt=n(e(P),2);{var et=r=>{var d=Tt();v(r,d)},at=r=>{var d=K(),B=D(d);{var m=o=>{_t(o,{title:"No entries yet",description:"Start tracking by logging your first insulin dose or meal.",action:a=>{ht(a,{href:"/log",variant:"primary",children:(l,M)=>{g();var E=gt("Log Entry");v(l,E)},$$slots:{default:!0}})}})},I=o=>{var u=Lt(),a=D(u),l=e(a),M=e(l),E=e(M,!0);t(M),g(2),t(l);var j=n(l,2),Q=e(j),st=e(Q,!0);t(Q),g(2),t(j);var R=n(j,2),$=e(R),rt=e($,!0);t($),g(2),t(R),t(a);var q=n(a,2),z=n(e(q),2);yt(z,21,()=>y.events.slice(0,5),x=>x.id,(x,i)=>{var k=St(),A=e(k),_=e(A),lt=e(_);{var nt=c=>{U(c,{class:"h-4 w-4"})},it=c=>{var J=K(),vt=D(J);{var dt=p=>{V(p,{class:"h-4 w-4"})},pt=p=>{wt(p,{class:"h-4 w-4"})};h(vt,p=>{s(i).eventType==="meal"?p(dt):p(pt,!1)},!0)}v(c,J)};h(lt,c=>{s(i).eventType==="insulin"?c(nt):c(it,!1)})}t(_);var G=n(_,2),C=e(G),ot=e(C,!0);t(C);var H=n(C,2),ct=e(H,!0);t(H),t(G),t(A),t(k),O(c=>{bt(_,1,`flex h-8 w-8 items-center justify-center rounded-full ${s(i).eventType==="insulin"?"bg-blue-500/20 text-blue-400":s(i).eventType==="meal"?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`),f(ot,s(i).eventType==="insulin"?`${s(i).value} units`:s(i).eventType==="meal"?`${s(i).value}g carbs`:`${s(i).value} mmol/L`),f(ct,c)},[()=>new Date(s(i).timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]),v(x,k)}),t(z),t(q),O(x=>{f(E,s(b).totalInsulin),f(st,s(b).totalCarbs),f(rt,x)},[()=>s(b).avgBSL!==null?s(b).avgBSL.toFixed(1):"-"]),v(o,u)};h(B,o=>{y.events.length===0?o(m):o(I,!1)},!0)}v(r,d)};h(tt,r=>{y.loading?r(et):r(at,!1)})}t(P),t(T),v(W,T),xt()}export{Rt as component};
